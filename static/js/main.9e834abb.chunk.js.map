{"version":3,"sources":["Components/Postcode.js","Components/Search.js","Components/Map.js","Components/ServiceItem.js","Components/StationItem.js","Components/StationList.js","App.js","Helpers/arrayHelpers.js","reportWebVitals.js","index.js"],"names":["Postcode","undefined","this","props","postcode","length","className","Component","Search","componentDidUpdate","prevProps","animateSearchWrapper","gsap","to","searchWrapper","height","width","ref","el","onSubmit","e","preventDefault","type","name","placeholder","onChange","searchQueryHandler","style","locationSearching","backgroundImage","onClick","geolocationClickHandler","buttonClickHandler","userPostcode","Map","map","marker","initMap","console","log","mapboxgl","accessToken","container","mapContainer","zoom","center","LngLat","longitude","latitude","setCenter","autoAlpha","pointerEvents","componentDidMount","initMarkers","allCoords","stations","forEach","station","stationCoords","push","Marker","color","setLngLat","addTo","bounds","reduce","coord","extend","LngLatBounds","fitBounds","padding","ServiceItem","expected_departure_time","destination_name","PureComponent","StationItem","getKm","m","toFixed","getServices","code","fetch","then","response","json","data","setState","prevState","serviceList","departures","all","state","station_code","services","service","train_uid","distance","StationList","s","App","target","value","getClosestPostcode","searchQuery","success","position","coords","userLatitude","userLongitude","getClosestStations","error","err","navigator","geolocation","getCurrentPosition","timeout","enableHighAccuracy","maximumAge","query","url","member","arr","property","types","memo","x","closestStations","train_station","tube","tube_station","loadMap","showMap","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9e834abb.chunk.js","sourcesContent":["import React, {Component} from \"react\";\n\nexport default class Postcode extends Component {\n\trender() {\n\t\tif (this.props.postcode === undefined || this.props.postcode.length <= 0) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<div className=\"postcode-wrapper\">\n\t\t\t\t\tYour postcode is {this.props.postcode}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t}\n}\n","import React, {Component} from \"react\";\nimport Postcode from \"./Postcode\";\nimport {gsap} from \"gsap\";\n\nexport default class Search extends Component {\n\tcomponentDidUpdate = (prevProps) => {\n\t\tif (prevProps.animateSearchWrapper !== this.props.animateSearchWrapper) {\n\t\t\tgsap.to(this.searchWrapper, {height: \"auto\", width: \"auto\"});\n\t\t}\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName=\"search-wrapper\"\n\t\t\t\tref={(el) => {\n\t\t\t\t\tthis.searchWrapper = el;\n\t\t\t\t}}>\n\t\t\t\t<form\n\t\t\t\t\tonSubmit={(e) => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}}>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"searchQuery\"\n\t\t\t\t\t\tplaceholder=\"Enter a postcode or town\"\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tthis.props.searchQueryHandler(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<button\n\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\tthis.props.locationSearching\n\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\tbackgroundImage:\n\t\t\t\t\t\t\t\t\t\t\t\"url(data:image/svg+xml;base64,PCEtLSBCeSBTYW0gSGVyYmVydCAoQHNoZXJiKSwgZm9yIGV2ZXJ5b25lLiBNb3JlIEAgaHR0cDovL2dvby5nbC83QUp6YkwgLS0+Cjxzdmcgd2lkdGg9IjM4IiBoZWlnaHQ9IjM4IiB2aWV3Qm94PSIwIDAgMzggMzgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIj4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMSAxKSIgc3Ryb2tlLXdpZHRoPSIyIj4KICAgICAgICAgICAgPGNpcmNsZSBzdHJva2Utb3BhY2l0eT0iLjUiIGN4PSIxOCIgY3k9IjE4IiByPSIxOCIvPgogICAgICAgICAgICA8cGF0aCBkPSJNMzYgMThjMC05Ljk0LTguMDYtMTgtMTgtMTgiPgogICAgICAgICAgICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0KICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iCiAgICAgICAgICAgICAgICAgICAgdHlwZT0icm90YXRlIgogICAgICAgICAgICAgICAgICAgIGZyb209IjAgMTggMTgiCiAgICAgICAgICAgICAgICAgICAgdG89IjM2MCAxOCAxOCIKICAgICAgICAgICAgICAgICAgICBkdXI9IjFzIgogICAgICAgICAgICAgICAgICAgIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+CiAgICAgICAgICAgIDwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==)\",\n\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t: {}\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\tthis.props.geolocationClickHandler(e);\n\t\t\t\t\t\t}}></button>\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\tthis.props.buttonClickHandler(e);\n\t\t\t\t\t\t}}></button>\n\t\t\t\t</form>\n\t\t\t\t<Postcode postcode={this.props.userPostcode} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, {Component} from \"react\";\nimport gsap from \"gsap\";\nimport mapboxgl from \"mapbox-gl\";\n\nclass Map extends Component {\n\tmap = null;\n\tmarker = null;\n\n\tinitMap = () => {\n\t\tconsole.log(\"HELLO\");\n\t\tmapboxgl.accessToken =\n\t\t\t\"pk.eyJ1Ijoibm9ycmlzb2xsaWUiLCJhIjoiY2ozbG1wdjQ4MDA2cTJxcDllbTl2aGRhbyJ9.sQsQfFSu0NcRseoxKW0_7w\";\n\t\tthis.map = new mapboxgl.Map({\n\t\t\tcontainer: this.mapContainer,\n\t\t\tstyle: \"mapbox://styles/norrisollie/ckkz4s27r33g217p7pahsfati\",\n\t\t\tzoom: 11,\n\t\t});\n\n\t\tconst center = new mapboxgl.LngLat(\n\t\t\tthis.props.longitude,\n\t\t\tthis.props.latitude\n\t\t);\n\n\t\tthis.map.setCenter(center);\n\n\t\tgsap.to(this.mapContainer, {autoAlpha: 1, pointerEvents: \"all\"});\n\t};\n\n\tinitMarkers() {\n\t\tlet allCoords = [];\n\n\t\tthis.props.stations.forEach((station) => {\n\t\t\tlet stationCoords = [];\n\n\t\t\tstationCoords = [station.longitude, station.latitude];\n\n\t\t\tallCoords.push(stationCoords);\n\n\t\t\tthis.marker = new mapboxgl.Marker({\n\t\t\t\tcolor: \"#FFFFFF\",\n\t\t\t})\n\t\t\t\t.setLngLat([station.longitude, station.latitude])\n\t\t\t\t.addTo(this.map);\n\t\t});\n\n\t\tvar bounds = allCoords.reduce(function (bounds, coord) {\n\t\t\treturn bounds.extend(coord);\n\t\t}, new mapboxgl.LngLatBounds(allCoords[0], allCoords[0]));\n\n\t\tthis.map.fitBounds(bounds, {\n\t\t\tpadding: 100,\n\t\t});\n\t}\n\n\tcomponentDidMount = () => {\n\t\tthis.initMap();\n\t\tthis.initMarkers();\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName=\"map-container\"\n\t\t\t\tref={(el) => {\n\t\t\t\t\tthis.mapContainer = el;\n\t\t\t\t}}></div>\n\t\t);\n\t}\n}\n\nexport default Map;\n","import React, {PureComponent} from \"react\";\n\nexport default class ServiceItem extends PureComponent {\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"service-peek\">\n\t\t\t\t<div className=\"depart-time\">{this.props.expected_departure_time}</div>\n\t\t\t\t<div className=\"destination-name\">{this.props.destination_name}</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, {Component} from \"react\";\n\nimport ServiceItem from \"./ServiceItem\";\n\nexport default class StationItem extends Component {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.state = {\n\t\t\tserviceList: [],\n\t\t};\n\t}\n\n\tgetKm = (m) => (m / 1000).toFixed(2);\n\n\tgetServices = (code) => {\n\t\tfetch(\n\t\t\t`https://transportapi.com/v3/uk/train/station/${code}///live.json?app_id=c15b5dbb&app_key=1cfe30d14a3934983892bed20b27e431&train_status=passenger`\n\t\t)\n\t\t\t.then((response) => response.json())\n\t\t\t.then((data) => {\n\t\t\t\tconsole.log(data);\n\t\t\t\tthis.setState(\n\t\t\t\t\t(prevState) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...prevState,\n\t\t\t\t\t\t\tserviceList: data.departures.all,\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\t() => {\n\t\t\t\t\t\tconsole.log(this.state);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t};\n\n\tcomponentDidMount = () => {\n\t\tthis.getServices(this.props.station_code);\n\t};\n\n\trender() {\n\t\tlet services = this.state.serviceList.map((service) => {\n\t\t\treturn <ServiceItem key={service.train_uid} {...service} />;\n\t\t});\n\n\t\treturn (\n\t\t\t<div className=\"station-item\">\n\t\t\t\t<div className=\"station-name-distance\">\n\t\t\t\t\t<div className=\"station-name-type\">\n\t\t\t\t\t\t<div className=\"station-type\"></div>\n\t\t\t\t\t\t<div className=\"station-name\">{this.props.name}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"station-distance\">\n\t\t\t\t\t\t{this.getKm(this.props.distance)}km\n\t\t\t\t\t\t<div className=\"distance-icon\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"service-list\">{services}</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, {Component} from \"react\";\n\nimport StationItem from \"./StationItem\";\n\nexport default class StationList extends Component {\n\trender() {\n\t\tconst stations = this.props.stations.map((s) => {\n\t\t\treturn <StationItem key={s.station_code} {...s} />;\n\t\t});\n\n\t\treturn <div className=\"stations-list\">{stations}</div>;\n\t}\n}\n","import React, {Component, createRef} from \"react\";\nimport Search from \"./Components/Search\";\nimport Map from \"./Components/Map\";\n\nimport \"./App.css\";\nimport {groupBy} from \"./Helpers/arrayHelpers\";\nimport StationList from \"./Components/StationList\";\n\nexport default class App extends Component {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.state = {\n\t\t\tsearchQuery: null,\n\t\t\tuserLatitude: null,\n\t\t\tuserLongitude: null,\n\t\t\tuserPostcode: null,\n\t\t\tclosestStations: null,\n\t\t\tlocationSearching: false,\n\t\t\tloadMap: false,\n\t\t};\n\t}\n\n\tsearchQueryHandler = (e) => {\n\t\tthis.setState((prevState) => {\n\t\t\treturn {...prevState, [e.target.name]: e.target.value};\n\t\t});\n\t};\n\n\t// TODO\n\t// validation for postcode\n\tbuttonClickHandler = (e) => {\n\t\te.preventDefault();\n\t\tthis.getClosestPostcode(this.state.searchQuery);\n\t};\n\n\tsuccess = (position) => {\n\t\tconst {name, latitude, longitude} = position.coords;\n\n\t\tthis.setState(\n\t\t\t(prevState) => {\n\t\t\t\treturn {\n\t\t\t\t\t...prevState,\n\t\t\t\t\tuserLatitude: latitude,\n\t\t\t\t\tuserLongitude: longitude,\n\t\t\t\t\tuserPostcode: name,\n\t\t\t\t\tlocationSearching: false,\n\t\t\t\t};\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tconst {userLatitude, userLongitude} = this.state;\n\t\t\t\tthis.getClosestStations(userLatitude, userLongitude);\n\t\t\t}\n\t\t);\n\t};\n\n\terror = (err) => {\n\t\tthis.setState({locationSearching: false});\n\t};\n\n\tgeolocationClickHandler = () => {\n\t\tif (\"geolocation\" in navigator) {\n\t\t\tnavigator.geolocation.getCurrentPosition(this.success, this.error, {\n\t\t\t\ttimeout: 600000,\n\t\t\t\tenableHighAccuracy: true,\n\t\t\t\tmaximumAge: 600000,\n\t\t\t});\n\n\t\t\tthis.setState((prevState) => {\n\t\t\t\treturn {...prevState, locationSearching: true};\n\t\t\t});\n\t\t}\n\t};\n\n\tgetClosestPostcode = (query) => {\n\t\tconsole.log(\"searching for a postcode!\");\n\n\t\tconst url = `https://transportapi.com/v3/uk/places.json?app_id=c15b5dbb&app_key=1cfe30d14a3934983892bed20b27e431&query=${query}&type=postcode`;\n\n\t\tfetch(url)\n\t\t\t.then((response) => response.json())\n\t\t\t.then((data) => {\n\t\t\t\tconst {name, latitude, longitude} = data.member[0];\n\t\t\t\tthis.setState(\n\t\t\t\t\t(prevState) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...prevState,\n\t\t\t\t\t\t\tuserLatitude: latitude,\n\t\t\t\t\t\t\tuserLongitude: longitude,\n\t\t\t\t\t\t\tuserPostcode: name,\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\t() => {\n\t\t\t\t\t\tconst {userLatitude, userLongitude} = this.state;\n\t\t\t\t\t\tthis.getClosestStations(userLatitude, userLongitude);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t};\n\n\tgetClosestStations = (latitude, longitude) => {\n\t\tconst url = `https://transportapi.com/v3/uk/places.json?app_id=c15b5dbb&app_key=1cfe30d14a3934983892bed20b27e431&lat=${latitude}&lon=${longitude}&type=postcode,train_station,tube_station`;\n\t\tfetch(url)\n\t\t\t.then((response) => response.json())\n\t\t\t.then((data) => {\n\t\t\t\tconst types = groupBy(data.member, \"type\");\n\t\t\t\tthis.setState(\n\t\t\t\t\t(prevState) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...prevState,\n\t\t\t\t\t\t\tuserPostcode: types.postcode[0].name,\n\t\t\t\t\t\t\tclosestStations: types.train_station,\n\t\t\t\t\t\t\ttube: types.tube_station,\n\t\t\t\t\t\t\tloadMap: true,\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\t() => {\n\t\t\t\t\t\tconsole.log(this.state.tube);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t};\n\n\tcomponentDidUpdate = (prevProps, prevState) => {};\n\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Search\n\t\t\t\t\tanimateSearchWrapper={this.state.loadMap}\n\t\t\t\t\tsearchQueryHandler={(e) => {\n\t\t\t\t\t\tthis.searchQueryHandler(e);\n\t\t\t\t\t}}\n\t\t\t\t\tbuttonClickHandler={(e) => {\n\t\t\t\t\t\tthis.buttonClickHandler(e);\n\t\t\t\t\t}}\n\t\t\t\t\tgeolocationClickHandler={(e) => {\n\t\t\t\t\t\tthis.geolocationClickHandler(e);\n\t\t\t\t\t}}\n\t\t\t\t\tuserPostcode={\n\t\t\t\t\t\tthis.state.userPostcode !== null ? this.state.userPostcode : \"\"\n\t\t\t\t\t}\n\t\t\t\t\tlocationSearching={this.state.locationSearching}\n\t\t\t\t/>\n\t\t\t\t{this.state.loadMap ? (\n\t\t\t\t\t<div className=\"map-list-container\">\n\t\t\t\t\t\t<Map\n\t\t\t\t\t\t\tshowMap={this.state.loadMap}\n\t\t\t\t\t\t\tlatitude={this.state.userLatitude}\n\t\t\t\t\t\t\tlongitude={this.state.userLongitude}\n\t\t\t\t\t\t\tstations={this.state.closestStations}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<StationList stations={this.state.closestStations} />\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t\"\"\n\t\t\t\t)}\n\t\t\t</>\n\t\t);\n\t}\n}\n","export const groupBy = (arr, property) => {\n\treturn arr.reduce(function (memo, x) {\n\t\tif (!memo[x[property]]) {\n\t\t\tmemo[x[property]] = [];\n\t\t}\n\t\tmemo[x[property]].push(x);\n\t\treturn memo;\n\t}, {});\n};\n\nexport const splitAt = (predicate, arr) => {\n\tconst index = arr.findIndex(predicate);\n\treturn [arr.slice(0, index), arr[index], arr.slice(index + 1)];\n};\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}