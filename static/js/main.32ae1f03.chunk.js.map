{"version":3,"sources":["Components/Postcode.js","Components/Search.js","App.js","Helpers/arrayHelpers.js","reportWebVitals.js","index.js"],"names":["Postcode","undefined","this","props","postcode","length","className","Component","Search","onSubmit","e","preventDefault","type","name","placeholder","onChange","searchQueryHandler","style","locationSearching","backgroundImage","onClick","geolocationClickHandler","buttonClickHandler","userPostcode","App","setState","target","value","getClosestPostcode","state","searchQuery","success","position","coords","latitude","longitude","prevState","userLatitude","userLongitude","getClosestStations","error","err","console","log","navigator","geolocation","getCurrentPosition","timeout","enableHighAccuracy","maximumAge","query","url","fetch","then","response","json","data","member","arr","property","types","reduce","memo","x","push","closestStations","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.32ae1f03.chunk.js","sourcesContent":["import React, {Component} from \"react\";\n\nexport default class Postcode extends Component {\n\trender() {\n\t\tif (this.props.postcode === undefined || this.props.postcode.length <= 0) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<div className=\"postcode-wrapper\">\n\t\t\t\t\tYour postcode is {this.props.postcode}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t}\n}\n","import React, {Component} from \"react\";\nimport Postcode from \"./Postcode\";\n\nexport default class Search extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"search-wrapper\">\n\t\t\t\t<form\n\t\t\t\t\tonSubmit={(e) => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}}>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"searchQuery\"\n\t\t\t\t\t\tplaceholder=\"Enter a postcode or town\"\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tthis.props.searchQueryHandler(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<button\n\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\tthis.props.locationSearching\n\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\tbackgroundImage:\n\t\t\t\t\t\t\t\t\t\t\t\"url(data:image/svg+xml;base64,PCEtLSBCeSBTYW0gSGVyYmVydCAoQHNoZXJiKSwgZm9yIGV2ZXJ5b25lLiBNb3JlIEAgaHR0cDovL2dvby5nbC83QUp6YkwgLS0+Cjxzdmcgd2lkdGg9IjM4IiBoZWlnaHQ9IjM4IiB2aWV3Qm94PSIwIDAgMzggMzgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIj4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMSAxKSIgc3Ryb2tlLXdpZHRoPSIyIj4KICAgICAgICAgICAgPGNpcmNsZSBzdHJva2Utb3BhY2l0eT0iLjUiIGN4PSIxOCIgY3k9IjE4IiByPSIxOCIvPgogICAgICAgICAgICA8cGF0aCBkPSJNMzYgMThjMC05Ljk0LTguMDYtMTgtMTgtMTgiPgogICAgICAgICAgICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0KICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iCiAgICAgICAgICAgICAgICAgICAgdHlwZT0icm90YXRlIgogICAgICAgICAgICAgICAgICAgIGZyb209IjAgMTggMTgiCiAgICAgICAgICAgICAgICAgICAgdG89IjM2MCAxOCAxOCIKICAgICAgICAgICAgICAgICAgICBkdXI9IjFzIgogICAgICAgICAgICAgICAgICAgIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+CiAgICAgICAgICAgIDwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==)\",\n\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t: {}\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\tthis.props.geolocationClickHandler(e);\n\t\t\t\t\t\t}}></button>\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\tthis.props.buttonClickHandler(e);\n\t\t\t\t\t\t}}></button>\n\t\t\t\t</form>\n\t\t\t\t<Postcode postcode={this.props.userPostcode} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, {Component} from \"react\";\nimport Search from \"./Components/Search\";\n\nimport \"./App.css\";\nimport Postcode from \"./Components/Postcode\";\nimport {groupBy} from \"./Helpers/arrayHelpers\";\n\nexport default class App extends Component {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.state = {\n\t\t\tsearchQuery: null,\n\t\t\tuserLatitude: null,\n\t\t\tuserLongitude: null,\n\t\t\tuserPostcode: null,\n\t\t\tclosestStations: null,\n\t\t\tlocationSearching: false,\n\t\t};\n\t}\n\n\tsearchQueryHandler = (e) => {\n\t\tthis.setState({[e.target.name]: e.target.value});\n\t};\n\n\t// TODO\n\t// validation for postcode\n\tbuttonClickHandler = (e) => {\n\t\te.preventDefault();\n\t\tthis.getClosestPostcode(this.state.searchQuery);\n\t};\n\n\tsuccess = (position) => {\n\t\tconst {name, latitude, longitude} = position.coords;\n\t\tthis.setState(\n\t\t\t(prevState) => {\n\t\t\t\treturn {\n\t\t\t\t\t...prevState,\n\t\t\t\t\tuserLatitude: latitude,\n\t\t\t\t\tuserLongitude: longitude,\n\t\t\t\t\tuserPostcode: name,\n\t\t\t\t\tlocationSearching: false,\n\t\t\t\t};\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tconst {userLatitude, userLongitude} = this.state;\n\t\t\t\tthis.getClosestStations(userLatitude, userLongitude);\n\t\t\t}\n\t\t);\n\t};\n\n\terror = (err) => {\n\t\tconsole.log(\"geolocation error:\");\n\t\tconsole.log(err);\n\t\tthis.setState({locationSearching: false});\n\t};\n\n\tgeolocationClickHandler = () => {\n\t\tif (\"geolocation\" in navigator) {\n\t\t\tnavigator.geolocation.getCurrentPosition(this.success, this.error, {\n\t\t\t\ttimeout: 100000,\n\t\t\t\tenableHighAccuracy: true,\n\t\t\t\tmaximumAge: 60000,\n\t\t\t});\n\n\t\t\tthis.setState({locationSearching: true});\n\t\t} else {\n\t\t\tconsole.log(\n\t\t\t\t\"sorry, looks as though you browser doesn't support geolocation!\"\n\t\t\t);\n\t\t}\n\t};\n\n\tgetClosestPostcode = (query) => {\n\t\tconsole.log(\"searching for a postcode!\");\n\n\t\tconst url = `https://transportapi.com/v3/uk/places.json?app_id=c15b5dbb&app_key=1cfe30d14a3934983892bed20b27e431&query=${query}&type=postcode`;\n\n\t\tfetch(url)\n\t\t\t.then((response) => response.json())\n\t\t\t.then((data) => {\n\t\t\t\tconst {name, latitude, longitude} = data.member[0];\n\t\t\t\tthis.setState(\n\t\t\t\t\t(prevState) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...prevState,\n\t\t\t\t\t\t\tuserLatitude: latitude,\n\t\t\t\t\t\t\tuserLongitude: longitude,\n\t\t\t\t\t\t\tuserPostcode: name,\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\t() => {\n\t\t\t\t\t\tconst {userLatitude, userLongitude} = this.state;\n\t\t\t\t\t\tthis.getClosestStations(userLatitude, userLongitude);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t};\n\n\tgetClosestStations = (latitude, longitude) => {\n\t\tconst url = `https://transportapi.com/v3/uk/places.json?app_id=c15b5dbb&app_key=1cfe30d14a3934983892bed20b27e431&lat=${latitude}&lon=${longitude}&type=postcode,train_station`;\n\t\tfetch(url)\n\t\t\t.then((response) => response.json())\n\t\t\t.then((data) => {\n\t\t\t\tconst types = groupBy(data.member, \"type\");\n\t\t\t\tconsole.log(types);\n\t\t\t\tthis.setState((prevState) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...prevState,\n\t\t\t\t\t\tuserPostcode: types.postcode[0].name,\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t});\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Search\n\t\t\t\t\tsearchQueryHandler={(e) => {\n\t\t\t\t\t\tthis.searchQueryHandler(e);\n\t\t\t\t\t}}\n\t\t\t\t\tbuttonClickHandler={(e) => {\n\t\t\t\t\t\tthis.buttonClickHandler(e);\n\t\t\t\t\t}}\n\t\t\t\t\tgeolocationClickHandler={(e) => {\n\t\t\t\t\t\tthis.geolocationClickHandler(e);\n\t\t\t\t\t}}\n\t\t\t\t\tuserPostcode={\n\t\t\t\t\t\tthis.state.userPostcode !== null ? this.state.userPostcode : \"\"\n\t\t\t\t\t}\n\t\t\t\t\tlocationSearching={this.state.locationSearching}\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\n\t}\n}\n","export const groupBy = (arr, property) => {\n\treturn arr.reduce(function (memo, x) {\n\t\tif (!memo[x[property]]) {\n\t\t\tmemo[x[property]] = [];\n\t\t}\n\t\tmemo[x[property]].push(x);\n\t\treturn memo;\n\t}, {});\n};\n\nexport const splitAt = (predicate, arr) => {\n\tconst index = arr.findIndex(predicate);\n\treturn [arr.slice(0, index), arr[index], arr.slice(index + 1)];\n};\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}